<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Lista de Pacientes</title>
                <!-- Template Main CSS File -->
        <link href="/assets/css/style.css" rel="stylesheet">
        <link href="/css/lista_paciente.css" rel="stylesheet">
        
    </head>
    
     <body style="background-image: url('/assets/img/telemedicina1.jpg'); background-size: cover;">
        <!-- ======= Header ======= -->
        
        <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center">
        <h1 class="logo me-auto"><a th:href="@{/}">Medifour</a></h1>
        
    </div>
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Acerca de nosotros</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Especialidades</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Doctores</a>
                </li>
            </ul>
        </nav>
    </header>
        
        <!-- End Header -->

       <div class="container mt-5">
           <br>
    <!-- Search Form -->
    <div class="form-container">
        <label for="selectConsulta">Tipo de Consulta:</label>
        <select id="selectConsulta" onchange="toggleDivs()">
            <option value="dni">Consulta por DNI</option>
            <option value="obra">Consulta por Obra Social</option>
        </select>

        <div id="consultaDniDiv" style="display: none;">
            <h2>Consulta Paciente por DNI</h2>
            <form th:action="@{/paciente/consultaDni}" method="get">
                <input type="text" name="dni" placeholder="Ingrese el DNI a buscar">
                <input type="submit" value="Buscar">
            </form>
        </div>

        <div id="consultaObraDiv" style="display: none;">
            <h2>Consulta Pacientes por Obra Social</h2>
            <form th:action="@{/paciente/consultaObra}" method="get">
                <select name="obra">
                    <option selected>Seleccione una Obra Social</option>
                    <option value="OSEP">OSEP</option>
                    <option value="SWISSMEDICAL">SWISSMEDICAL</option>
                    <option value="OSDE">OSDE</option>
                    <option value="OSPE">OSPE</option>
                    <option value="SANCOR">SANCOR</option>
                    <option value="MEDICUS">MEDICUS</option>
                    <option value="OMINT">OMINT</option>
                </select>
                <input type="submit" value="Buscar">
            </form>
        </div>
    </div>



        <script>
            function toggleDivs() {
                var selectElement = document.getElementById("selectConsulta");
                var dniDiv = document.getElementById("consultaDniDiv");
                var obraDiv = document.getElementById("consultaObraDiv");
        
                if (selectElement.value === "dni") {
                    dniDiv.style.display = "block";
                    obraDiv.style.display = "none";
                } else if (selectElement.value === "obra") {
                    dniDiv.style.display = "none";
                    obraDiv.style.display = "block";
                }
            }
        </script>
        
<h1 class="section-title mt-5">Lista de Pacientes</h1>
    <table class="table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>DNI</th>                    
                    <th>Telefono</th>
                    <th>E-Mail</th>
                    <th>Fecha de Nacimiento</th>
                    <th>Obra Social</th>
                    <th>N° de Afiliado</th>
                    <th>Foto de Perfil</th>
                    <th>ACCIONES</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="paciente : ${pacientes}">
                    <td th:text="${paciente.nombre}"></td>
                    <td th:text="${paciente.apellido}"></td>
                    <td th:text="${paciente.dni}"></td>
                    <td th:text="${paciente.telefono}"></td>
                    <td th:text="${paciente.email}"></td>
                    <td th:text="${paciente.fechaNacimiento}"></td>
                    <td th:text="${paciente.obraSocial}"></td>
                    <td th:text="${paciente.numeroAfiliado}"></td>
                    <td>
                        <a th:if="${paciente.imagen != null}" th:href="@{/imagen/perfil/__${paciente.id}__}">
                            <img th:style="'width: 10%; margin: auto;'" th:src="@{/imagen/perfil/__${paciente.id}__}">
                        </a>
                    </td>



                    <td style="text-align: center; vertical-align: middle;">
                        <form th:action="@{/paciente/bajaPaciente/{id}(id=${paciente.id})}" method="get">
                            <input type="submit" value="Dar de Baja">
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>


        <!-- <div class="container m-5" >

            <table class="table table-dark">
                <thead>
                    <tr>
                        <th scope="col">Id del Autor</th>
                        <th scope="col">Nombre del Autor</th>
                        <th scope="col" sec:authorize="hasAuthority('ADMIN')">Acciones</th>

                    </tr>
                </thead>
                <tbody th:each="autor : ${autores}"> 
                    <tr>
                        <th scope="row" th:text="${autor.id}"></th>
                        <td th:text="${autor.nombre}"></td>
                        <td>
                            <a sec:authorize="hasAuthority('ADMIN')" th:href= "@{/autor/modificar/__${autor.id}__}"><i class="fas fa-feather-alt">  </i> Modificar </a>
                        </td>

                    </tr>

                </tbody>
            </table>

            <div th:if="${exito}!=null" class="card text-white bg-success mb-3 mt-3 mensajeExito" >
                <div class="card-body">
                    <h5 class="card-title">Exito ð</h5>
                    <p class="card-text" th:text="${exito}"></p>
                </div>
            </div>
            <div th:if="${error}!=null" class="card text-white bg-danger mb-3 mensajeError" >
                <div class="card-body">
                    <h5 class="card-title">Error ð</h5>
                    <p class="card-text" th:text="${error}"></p>
                </div>
            </div> 
        
        -->
        <br>

        <div class="text-center">
        <a th:href="@{...}" class="btn btn-secondary mt-3">Volver</a>
    </div>
</div>

    </body>
</html>



